package ui;

import javax.swing.*;
import java.awt.*;

public class AlgorithmPanel extends JPanel {
    public AlgorithmPanel() {
        setLayout(new BorderLayout());

        JTextArea algorithmText = new JTextArea();
        algorithmText.setEditable(false);
        algorithmText.setFont(new Font(Font.MONOSPACED, Font.PLAIN, 14));
        algorithmText.setBorder(BorderFactory.createTitledBorder("Визуализация алгоритмов расчета"));

        String text = getDetailedAlgorithms();
        algorithmText.setText(text);

        JScrollPane scrollPane = new JScrollPane(algorithmText);
        add(scrollPane, BorderLayout.CENTER);
    }

    private String getDetailedAlgorithms() {
        return
                "═".repeat(80) + "\n" +
                        "                   АЛГОРИТМ РАСЧЕТА СОПЛА ЛАВАЛЯ\n" +
                        "═".repeat(80) + "\n\n" +

                        "█▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀█\n" +
                        "█                              ЭТАП 1: ВВОД ДАННЫХ                              █\n" +
                        "█▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█\n\n" +

                        "• Давление на входе (p₀)          [Па]  - Статическое давление в камере сгорания\n" +
                        "• Температура на входе (T₀)       [K]   - Статическая температура газа\n" +
                        "• Показатель адиабаты (γ)         [-]   - Отношение теплоемкостей Cp/Cv\n" +
                        "• Газовая постоянная (R)          [Дж/(кг·K)] - Удельная газовая постоянная\n" +
                        "• Массовый расход (ṁ)            [кг/с] - Расход газа через сопло\n\n" +

                        "█▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀█\n" +
                        "█                              ЭТАП 2: РАСЧЕТЫ                                 █\n" +
                        "█▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.1: РАСЧЕТ СКОРОСТИ ЗВУКА (критическая скорость)                       │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    Формула: a₀ = √(γ ⋅ R ⋅ T₀)\n" +
                        "    ▷ a₀ - скорость звука в заторможенном потоке [м/с]\n" +
                        "    ▷ γ = " + "1.4" + " (для воздуха), R = " + "287" + " Дж/(кг·K)\n" +
                        "    ▷ Пример: при T₀ = 300K → a₀ = √(1.4 × 287 × 300) ≈ 347.2 м/с\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.2: РАСЧЕТ ПЛОТНОСТИ ГАЗА НА ВХОДЕ                                     │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    Формула: ρ₀ = p₀ / (R ⋅ T₀)\n" +
                        "    ▷ ρ₀ - плотность газа [кг/м³]\n" +
                        "    ▷ Уравнение состояния идеального газа\n" +
                        "    ▷ Пример: при p₀ = 101325 Па, T₀ = 300K → ρ₀ = 101325/(287×300) ≈ 1.176 кг/м³\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.3: РАСЧЕТ КРИТИЧЕСКОГО СЕЧЕНИЯ (A*)                                   │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    Формула: A* = ṁ / (ρ₀ ⋅ a₀)\n" +
                        "    ▷ A* - площадь критического сечения [м²]\n" +
                        "    ▷ В критическом сечении скорость потока равна скорости звука (M=1)\n" +
                        "    ▷ Пример: при ṁ = 1 кг/с → A* = 1/(1.176 × 347.2) ≈ 0.00245 м²\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.4: РАСЧЕТ ВЫХОДНОГО СЕЧЕНИЯ (Aₑ)                                     │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    Формула: Aₑ = A* ⋅ (1/Mₑ) ⋅ [(1 + (γ-1)/2 ⋅ Mₑ²) / (1 + (γ-1)/2)]^((γ+1)/(2(γ-1)))\n" +
                        "    ▷ Aₑ - площадь выходного сечения [м²]\n" +
                        "    ▷ Mₑ - число Маха на выходе (задается)\n" +
                        "    ▷ Для Mₑ = 2.0, γ = 1.4 → Aₑ/A* ≈ 1.687\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.5: РАСЧЕТ ПАРАМЕТРОВ НА ВЫХОДЕ                                       │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    • Давление на выходе: pₑ = p₀ / [1 + (γ-1)/2 ⋅ Mₑ²]^(γ/(γ-1))\n" +
                        "    • Температура на выходе: Tₑ = T₀ / [1 + (γ-1)/2 ⋅ Mₑ²]\n" +
                        "    • Скорость на выходе: Vₑ = Mₑ ⋅ √(γ ⋅ R ⋅ Tₑ)\n\n" +

                        "═".repeat(80) + "\n" +
                        "                 АЛГОРИТМ РАСЧЕТА КИСЛОРОДНОЙ ФУРМЫ\n" +
                        "═".repeat(80) + "\n\n" +

                        "█▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀█\n" +
                        "█                              ЭТАП 1: ВВОД ДАННЫХ                              █\n" +
                        "█▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█\n\n" +

                        "• Масса металла (m)               [кг]   - Масса нагреваемого металла\n" +
                        "• Расход кислорода (Q_O₂)         [м³/ч] - Объемный расход кислорода\n" +
                        "• Начальная температура (T₀)     [°C]   - Начальная температура металла\n" +
                        "• Удельная теплоемкость (c)      [кДж/(кг·K)] - Теплоемкость металла\n" +
                        "• Тепловой коэффициент (k)       [кДж/кг] - Удельная теплота реакции\n\n" +

                        "█▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀█\n" +
                        "█                              ЭТАП 2: РАСЧЕТЫ                                 █\n" +
                        "█▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.1: РАСЧЕТ ТЕПЛОВОЙ ЭНЕРГИИ                                           │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    Формула: Q = k ⋅ m\n" +
                        "    ▷ Q - общая тепловая энергия [кДж]\n" +
                        "    ▷ k ≈ 2500-3000 кДж/кг (для стали)\n" +
                        "    ▷ Пример: при m = 1000 кг, k = 2500 → Q = 2500 × 1000 = 2,500,000 кДж\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.2: РАСЧЕТ КОНЕЧНОЙ ТЕМПЕРАТУРЫ                                       │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    Формула: T₁ = T₀ + ΔT, где ΔT = Q / (m ⋅ c)\n" +
                        "    ▷ T₁ - конечная температура [°C]\n" +
                        "    ▷ c ≈ 0.84 кДж/(кг·K) для стали\n" +
                        "    ▷ Пример: ΔT = 2,500,000 / (1000 × 0.84) ≈ 2976°C → T₁ = 25 + 2976 = 3001°C\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.3: РАСЧЕТ ВРЕМЕНИ ПРОДУВКИ                                           │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    Формула: t = m / Q_O₂\n" +
                        "    ▷ t - время продувки [ч]\n" +
                        "    ▷ Упрощенная модель (на практике зависит от многих факторов)\n" +
                        "    ▷ Пример: при Q_O₂ = 300 м³/ч → t = 1000 / 300 ≈ 3.33 часа\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.4: РАСЧЕТ ОБЩЕГО РАСХОДА КИСЛОРОДА                                   │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    Формула: V_O₂ = Q_O₂ ⋅ t\n" +
                        "    ▷ V_O₂ - общий объем израсходованного кислорода [м³]\n" +
                        "    ▷ Пример: V_O₂ = 300 × 3.33 ≈ 1000 м³\n\n" +

                        "┌─────────────────────────────────────────────────────────────────────────────┐\n" +
                        "│ ШАГ 2.5: ПРОВЕРКА ТЕПЛОВОГО БАЛАНСА                                        │\n" +
                        "└─────────────────────────────────────────────────────────────────────────────┘\n" +
                        "    • Теплота от реакции: Q_react = V_O₂ ⋅ H_O₂ (H_O₂ ≈ 13-15 МДж/м³)\n" +
                        "    • Потери тепла: Q_loss = Q_react ⋅ η (η ≈ 0.7-0.9)\n" +
                        "    • Баланс: Q_react - Q_loss = m ⋅ c ⋅ ΔT\n\n" +

                        "█▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀█\n" +
                        "█                          ФИЗИЧЕСКИЕ ОСНОВЫ ПРОЦЕССОВ                         █\n" +
                        "█▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█\n\n" +

                        "СОПЛО ЛАВАЛЯ:\n" +
                        "• Принцип: преобразование тепловой энергии в кинетическую\n" +
                        "• Критическое сечение: место достижения скорости звука (M=1)\n" +
                        "• Сверхзвуковой поток: ускорение в расширяющейся части\n" +
                        "• Применение: ракетные двигатели, газовые турбины\n\n" +

                        "КИСЛОРОДНАЯ ФУРМА:\n" +
                        "• Принцип: окисление примесей в металле с выделением тепла\n" +
                        "• Тепловой баланс: учет всех источников и стоков тепла\n" +
                        "• Процессы: горение углерода, нагрев металла, потери\n" +
                        "• Применение: сталеплавильные печи, конвертеры\n\n" +

                        "⚠  ПРИМЕЧАНИЯ:\n" +
                        "• Расчеты являются упрощенными моделями реальных процессов\n" +
                        "• Для точных расчетов требуются поправочные коэффициенты\n" +
                        "• Учитываются потери тепла, КПД процессов, реальные свойства материалов";
    }
}